  <!DOCTYPE html>
  <html lang="en">

  <head>

    <!-- Meta Tag -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO -->
    <meta name="description" content="150 words">
    <meta name="author" content="Athul Antony">
    <meta name="url" content="www.techeos.com">
    <meta name="copyright" content="TechEOS">
    <meta name="robots" content="index,follow">
    <meta name="google-site-verification" content="pgEG4IJCNjR9R04Jk6UByLm--5HUOJtrojTlnb3CWk4" />
    <meta name="description" content="This article lets you to implement Play Store's new moving card with recyclerview." itemprop="description">
    <meta property="og:tags" content="Android Development,Android oreo,
    Playstore,CardView,Imageview,Recyclerview,imageview animation,Android animation,
    android recyclerview,recyclerview techniques,kotlin recyclerview,recyclerview in kotlin,
    kotlin tricks,android,playstore app,technical blog,blog,android studio,play store material design,
    playstore cards,play store update,play store console,play store download">
    <meta name="keywords" content="Android Development,Android oreo,
    Playstore,CardView,Imageview,Recyclerview,imageview animation,Android animation,
    android recyclerview,recyclerview techniques,kotlin recyclerview,recyclerview in kotlin,
    kotlin tricks,android,playstore app,technical blog,blog,android studio,play store material design,
    playstore cards,play store update,play store console,play store download">
    <meta property="og:title" content="Play Store like moving image with recyclerview " />
    <meta property="og:description" content="This article lets you to implement Play Store's new moving card with recyclerview.">
    <meta property="og:type" content="article" />
    <meta property="og:image" content="www.techeos.com/playstore_card_original.gif" />
    <meta property="og:site_name" content="TechEOS" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=yes">

    <title>Play Store like moving image with recyclerview | TechEOS</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="../images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="144x144" type="image/x-icon" href="images/favicon/apple-touch-icon.png">

    <!-- All CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="../css/plugin.css">

    <!-- Main CSS Stylesheet -->
    <link rel="stylesheet" type="text/css" href="../css/style.css">

    <!-- Google Web Fonts  -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,300,500,600,700">

    <!-- Syntax Highlighter  -->
    <link rel="stylesheet" type="text/css" href="../css/syntax/shCore.css">
    <link rel="stylesheet" type="text/css" href="../css/syntax/shThemeDefault.css">


    <!-- HTML5 shiv and Respond.js support IE8 or Older for HTML5 elements and media queries -->
      <!--[if lt IE 9]>
  	   <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  	   <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
     <![endif]-->




   </head>

   <body>

     <!--Google Analytics tracking code-->
     <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-104487467-1', 'auto');
       ga('send', 'pageview');

     </script>

     <!-- Preloader Start -->
     <div class="preloader">
      <div class="rounder"></div>
    </div>
    <!-- Preloader End -->




    <div id="main">
      <div class="container">
        <div class="row">



         <!-- About Me (Left Sidebar) Start -->
         <div class="col-md-3">
           <div class="about-fixed">

             <div class="my-pic">
              <img src="../images/pic/my-pic.png" alt="">
              <a href="javascript:void(0)" class="collapsed" data-target="#menu" data-toggle="collapse"><i class="icon-menu menu"></i></a>
              <div id="menu" class="collapse">
               <ul class="menu-link">
                                <!-- <li><a href="about.html">About</a></li>
                                 <li><a href="work.html">Work</a></li>
                                 <li><a href="contact.html">Contact</a></li> -->
                                 <li>About</li>
                                 <li>Work</a></li>
                                 <li>Contact</li>
                               </ul>
                             </div>
                           </div>



                           <div class="my-detail">

                            <div class="white-spacing">
                              <h1>Blog by Athul Antony</h1>
                              <span>Android Developer @ <a href="http://entri.me">Entri.Inc</a></span>

                            </div>

                            <ul class="social-icon">
                             <li><a href="https://www.facebook.com/athulantony" target="_blank" class="facebook"><i class="fa fa-facebook"></i></a></li>
                             <li><a href="https://twitter.com/athulantonynp" target="_blank" class="twitter"><i class="fa fa-twitter"></i></a></li>
                             <li><a href="https://www.linkedin.com/in/athul-antony-np-5242b4104/" target="_blank" class="linkedin"><i class="fa fa-linkedin"></i></a></li>
                             <li><a href="https://github.com/athulantonynp" target="_blank" class="github"><i class="fa fa-github"></i></a></li>
                           </ul>

                         </div>
                       </div>
                     </div>
                     <!-- About Me (Left Sidebar) End -->





                     <!-- Blog Post (Right Sidebar) Start -->
                     <div class="col-md-9">
                      <div class="col-md-12 page-body">
                      	<div class="row">


                          <div class="sub-title">
                           <a href="../index.html" title="Go to Home Page"><h2>Back Home</h2></a>
                           <a href="#comment" class="smoth-scroll"><i class="icon-bubbles"></i></a>
                         </div>


                         <div class="col-md-12 content-page">
                          <div class="col-md-12 blog-post">
                            <!-- Post Headline Start -->
                            <div class="post-title">
                              <h1>Play Store like sliding image with recyclerview.</h1>
                            </div>
                            <!-- Post Headline End -->

                            <!-- Post Detail Start -->
                            <div class="post-info">
                              <span>February 4, 2018 / by <a href="#" target="_blank">Athul Antony</a></span>
                            </div>
                            <!-- Post Detail End -->
                            <p>The material design has come all the way to its success easily in Android and Web recent years.  An eminent part of apps in Play Store has adopted to material design and started competing with each other. Also, Google Play Store itself made a material inspired look on their app 3 years ago. They have well-utilized material concepts such as CardView, RecyclerView, Tab layout and Navigation drawer etc., This blog post which I am writing about is a cool and fluent concept they have implemented in their app recently.
                            </p><br></br>
                            <p >
                              <img src="http://www.techeos.com/images/blog/playstore_card_original.gif" alt="Playstore's sliding image with card"><br></br>
                            </p>
                            <p>
                              If you look at the gif image above, A cool animation is happening on the scroll of items which makes a great UX  to the user. This is simply a horizontal recyclerview inside a wrapper card view. I havenâ€™t seen the same implementation any apps other than play store itself. These gnaw made me implement the UX as they have and recently cracked it. I am not sure about that this is not the exact way play store used but I am sure that this will work same as expected. 
                            </p>
                          </br>
                          <h4>Anatomy of design (isLookingForCode? skipThis() : readThis() );</h4>

                          <p>
                          The first assumption came to my mind was that they may have used Coordinator layout or frame layout inside the wrapper cardview which has a child recycler view. Since the coordinator layout has the ability to coordinate the views and their actions, I started implementing a custom coordinator behaviour class for the layout. Just for a verification that my assumption is correct, I tried to get the current layout attributes using  ADB command </p> 

                          <blockquote class="margin-top-40 margin-bottom-40">
                            <p> <b>`adb shell uiautomator dump'</b></p>
                          </blockquote>


                          <p> Surprisingly, layout attributes gave me a negative result! They have used only relative layout instead of coordinator layout. My assumption was wrong and This made things clearer that all those view translations are invoked by the recyclerview callbacks. For a smooth experience, Recyclerview has a snapping behaviour in order to put things well organized. 
                          </p>
                          <h4>Take my code!</h4>

                          <p> Recycler view of android support library contains some call back method for scrolling event. We can make use of this for listening to the scrolling of items in the recyclerview. First, letâ€™s create a card view which contains a recyclerview with the horizontal layout manager. </p>

                          <div class="margin-top-40 margin-bottom-40">
                            <pre class="brush: js">

                              //Layout manager initialization

                              linearLayoutManager = LinearLayoutManager(this,LinearLayoutManager.HORIZONTAL,false)

                              //adapter class, where sample dataset is passed to constructor

                              adapter= SampleAdapter(createSampleData())

                              //Custom scroll listner where image view required to move is passed 
                              //into constructor. 

                              rv_main.apply{

                              layoutManager=linearLayoutManager
                              isNestedScrollingEnabled=true
                              adapter=adapter
                              addOnScrollListener(CustomScrollListner(iv_back))
                            }  

                          </pre>
                        </div>
                        <p>
                          If you look at the play store implementation, You can see that they have skipped first two positions of recyclerview in order to make the background items of card view visible. It can be achieved simply by overriding the <h8>getItemCount()</h8> of adapter class and making the  view holder's itemview invisible for first two positions in <h8>onBindViewHolder()</h8> method. (You can also use different viewholder pattern for further modification of these empty item views)
                        </p>

                        <div class="margin-top-40 margin-bottom-40">
                          <pre class="brush: js">

                            //Hiding first two views in holder for making the background
                            //Imageview visible to user.

                            override fun onBindViewHolder(holder: ViewHolder?, position: Int) {
                            val view=holder?.itemView

                            if(position==0||position==1){
                            view?.let {
                            it.visibility=View.INVISIBLE;
                          }

                        }
                      }

                    </pre>
                  </div>

                  <p>
                    For animating the imageview in card background we have to create custom <h8>onScrollListener.class</h8> for recyclerview. Which we will be passing the views which should be animated, through the constructor. There will be an overridden call back method called <h8>onScrolled(RecyclerView recyclerView, int dx, int dy)</h8> which will be invoked during the scrolling of the recycler view. We can make use of it for view translations. 
                  </p><br></br>
                  <script src="https://gist.github.com/athulantonynp/4809f0669dc18e53638dd5ee65a81fad.js"></script>
                  <p>
                    Method <h8>getHorizontalScrollOffset()</h8> of recycler view will give the horizontal scroll offset of the scroll. Using this we can control the view translation rate and alpha of the view. I have made a simple mathematical formula for controlling the translation and alpha in method <h8>getAlphaForView()</h8>
                  </p>

                  <p>
                    At last, If you look closely the scrolling of recycler view items, You can see that there is a snapping of items happening to the left end while scrolling. A default snapping is given to the recycler view library while it wonâ€™t result in the exact animation you wanted. <a href="https://github.com/rubensousa/RecyclerViewSnap/tree/master/gravitysnaphelper/src/main/java/com/github/rubensousa/gravitysnaphelper" target="_blank">Rubensousa</a> in github has implemented gravity snap helper for this issue we can make use of it. 
                  </p>

                  <div class="margin-top-40 margin-bottom-40">
                    <pre class="brush: js">

                      //Attaching the gravity snap helper to the recycler view

                      GravitySnapHelper(Gravity.START).attachToRecyclerView(rv_main)

                    </pre>
                  </div>
                  <p>
                   Thatâ€™s it now just run your code, You can see the same behaviour of play store in your app also. A sample project is implemented in my GitHub page.
                   You can refer it for more. <br><a href="https://github.com/athulantonynp/PlayStoreCard"><h8>GitHub Project</h8></a></pr>
                   <br></br>
                   <img src="http://www.techeos.com/images/blog/playstore_card_sample.gif" alt="Playstore's sliding image with card sample"><br></br>
                 </p>

               </div>
               <br><br><br>
               Happy coding!

             </p>
           </div> </div>

         </div>



         <!-- Post Author Bio Box Start -->
         <div class="about-author margin-top-70 margin-bottom-50">
          <div class="picture">
            <img src="../images/blog/author_new.jpg" class="img-responsive" alt="">
          </div>

          <div class="c-padding">
           <h3>Article By <a href="../index.html" target="_blank" data-toggle="tooltip" data-placement="top" title="Visit Athul's Website">Athul Antony</a></h3>
           <p>Liked my post or having doubts ? Mail me at <a href="mailto:someone@example.com?Subject=TechEOS|1615" target="_top"> athul@entri.me </a></p>
         </div>
       </div>
       <!-- Post Author Bio Box End -->






       <!-- Footer Start -->
       <div class="col-md-12 page-body margin-top-50 footer">
        <footer>
          <ul class="menu-link">
           <li><a href="../index.html">Home</a></li>
           <li><a href="index.html">About</a></li>
           <li><a href="../index.html">Work</a></li>
           <li><a href="../index.html">Contact</a></li>
         </ul>

         <p>Â© Copyright 2017 TechEOS. All rights reserved</p>


         <!-- UiPasta Credit Start -->
         <div class="uipasta-credit">Design By <a href="http://www.uipasta.com" target="_blank">UiPasta</a></div>
         <!-- UiPasta Credit End -->


       </footer>
     </div>
     <!-- Footer End -->


   </div>
   <!-- Blog Post (Right Sidebar) End -->

 </div>
</div>
</div>


      <!-- Back to Top Start
      <a href="#" class="scroll-to-top"><i class="fa fa-long-arrow-up"></i></a>
      Back to Top End -->


      <!-- All Javascript Plugins  -->
      <script type="text/javascript" src="../js/jquery.min.js"></script>
      <script type="text/javascript" src="../js/plugin.js"></script>

      <!-- Main Javascript File  -->
      <script type="text/javascript" src="../js/scripts.js"></script>

      <!-- Syntax Highlighter Javascript File  -->
      <script type="text/javascript" src="../js/syntax/shCore.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushCss.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushJScript.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushPerl.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushPerl.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushPhp.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushPlain.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushPython.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushRuby.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushSql.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushVb.js"></script>
      <script type="text/javascript" src="../js/syntax/shBrushXml.js"></script>

      <!-- Syntax Highlighter Call Function -->
      <script type="text/javascript">
        SyntaxHighlighter.config.clipboardSwf = '../js/syntax/clipboard.swf';
        SyntaxHighlighter.all();
      </script>


    </body>
    </html>
